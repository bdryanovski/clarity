// Copyright (c) 2016-2019 VMware, Inc. All Rights Reserved.
// This software is released under MIT license.
// The full license information can be found in LICENSE in the root directory of this project.

@function progressNow($base, $value) {
  // convert to
  $pr: calc(1 - ($value/100));
  @return calc($base * $pr);
}
@mixin min-height($size) {
  min-height: $size;
  min-width: $size;
  height: $size;
  width: $size;
}

$clr-spinner-bg-color: #e6e6e6;
$clr-spinner-color: #0079b8;
$clr-spinner-opacity: 1;

$clr-progress-cicle-dasharray: 2 * 3.14 * 56;
$clr-progress-circle-dashoffset: $clr-progress-cicle-dasharray * (1 - (80 / 100));

/* */

@import '../../utils/mixins.clarity.scss';

@include exports('progress-circle.clarity') {
  .progressCircle {
    position: relative;

    // could do it with mixin here
    @include min-height(3rem);
    display: inline-block;

    .progressCircleImage {
      // fix rotation
      transform: rotate(-90deg);
    }

    .__base {
      stroke: $clr-spinner-bg-color;
      stroke-width: 8;
      fill: none;
    }
    .__value {
      stroke: $clr-spinner-color;
      fill: none;
      stroke-width: 8;
      stroke-dasharray: $clr-progress-cicle-dasharray;
      //stroke-dashoffset: progressNow($clr-progress-circle-dashoffset, attr(data-progress number, 1));
    }

    .progressLabel {
      position: absolute;
      z-index: 1;
      width: 100%;
      left: 0;
      top: 0;
      line-height: 5.1em; // that 0.1 is not cool
      color: #000;
      display: block;
      text-align: center;
      white-space: nowrap;
    }
  }
}
